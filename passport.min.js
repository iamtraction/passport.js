/**
 * @copyright 2020 - Sankarsan Kampa
 * @license MIT
 */
const PASSPORT_SUBDOMAIN="passport",API_SUBDOMAIN="ex",buildURL=(n,o)=>{let t;return t=n?"https://"+n+".traction.one":"https://traction.one",o?t+(o.startsWith("/")?"":"/")+o:t},request=n=>window.fetch(n,{credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({}),json:!0}),signInWithPassport=()=>{const n=window.open(buildURL("passport"),"_blank","height=600,width=600");let o=window.setInterval(()=>{var t;n.closed&&(clearInterval(o),(t=buildURL("ex","/accounts/verify"),window.fetch(t,{credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({}),json:!0})).then(n=>n.json()).then(n=>{if(n.username){if(!("undefined"!=typeof onPassportSignin&&onPassportSignin instanceof Function))throw new Error("PassportError: onPassportSignIn function wasn't declared to handle the signin event.");onPassportSignIn(n)}else{if(!("undefined"!=typeof onPassportError&&onPassportError instanceof Function))throw new Error("PassportError: onPassportError function wasn't declared to handle the error event.");onPassportError(n)}}).catch(n=>{if(!("undefined"!=typeof onPassportRequestError&&onPassportRequestError instanceof Function))throw new Error("PassportError: onPassportRequestError function wasn't declared to handle the error event.");onPassportRequestError(n)}))},1e3)};"undefined"==typeof module&&(module={}),module.exports={signInWithPassport:signInWithPassport};